{"ast":null,"code":"\"use strict\";\n\nvar _defineProperty = require(\"@babel/runtime/helpers/defineProperty\");\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.OptionsProcessor = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar clone_1 = tslib_1.__importDefault(require(\"lodash/clone\"));\n\nvar isEqual_1 = tslib_1.__importDefault(require(\"lodash/isEqual\"));\n\nvar isObject_1 = tslib_1.__importDefault(require(\"lodash/isObject\"));\n\nvar isArray_1 = tslib_1.__importDefault(require(\"lodash/isArray\"));\n\nvar isString_1 = tslib_1.__importDefault(require(\"lodash/isString\"));\n\nvar endsWith_1 = tslib_1.__importDefault(require(\"lodash/endsWith\"));\n\nvar forEach_1 = tslib_1.__importDefault(require(\"lodash/forEach\"));\n\nvar has_1 = tslib_1.__importDefault(require(\"lodash/has\"));\n\nvar OptionsProcessor = function () {\n  function OptionsProcessor(store, uniqueIdProvider, optionProcessorsRegistry, colorService, assetService, deprecations) {\n    _classCallCheck(this, OptionsProcessor);\n\n    this.store = store;\n    this.uniqueIdProvider = uniqueIdProvider;\n    this.optionProcessorsRegistry = optionProcessorsRegistry;\n    this.colorService = colorService;\n    this.assetService = assetService;\n    this.deprecations = deprecations;\n  }\n\n  _createClass(OptionsProcessor, [{\n    key: \"processOptions\",\n    value: function processOptions(options, commandName, props) {\n      var _this = this;\n\n      this.processObject(options, clone_1.default(options), function (key, parentOptions) {\n        _this.deprecations.onProcessOptions(key, parentOptions, commandName);\n\n        _this.deprecations.checkForDeprecatedOptions(parentOptions);\n      }, commandName, props);\n    }\n  }, {\n    key: \"processDefaultOptions\",\n    value: function processDefaultOptions(options, commandName) {\n      var _this2 = this;\n\n      this.processObject(options, clone_1.default(options), function (key, parentOptions) {\n        _this2.deprecations.onProcessDefaultOptions(key, parentOptions);\n      }, commandName);\n    }\n  }, {\n    key: \"processObject\",\n    value: function processObject(objectToProcess, parentOptions, onProcess, commandName, props, parentPath) {\n      var _this3 = this;\n\n      forEach_1.default(objectToProcess, function (value, key) {\n        var objectPath = _this3.resolveObjectPath(key, parentPath);\n\n        _this3.processWithRegisteredProcessor(key, value, objectToProcess, objectPath, commandName, props);\n\n        _this3.processColor(key, value, objectToProcess);\n\n        if (!value) {\n          return;\n        }\n\n        _this3.processComponent(key, value, objectToProcess);\n\n        _this3.processImage(key, value, objectToProcess);\n\n        _this3.processButtonsPassProps(key, value);\n\n        _this3.processSearchBar(key, value, objectToProcess);\n\n        _this3.processInterpolation(key, value, objectToProcess);\n\n        _this3.processAnimation(key, value, objectToProcess);\n\n        onProcess(key, parentOptions);\n        var processedValue = objectToProcess[key];\n\n        if (!isEqual_1.default(key, 'passProps') && (isObject_1.default(processedValue) || isArray_1.default(processedValue))) {\n          _this3.processObject(processedValue, parentOptions, onProcess, commandName, props, objectPath);\n        }\n      });\n    }\n  }, {\n    key: \"resolveObjectPath\",\n    value: function resolveObjectPath(key, path) {\n      if (!path) path = key;else path += \".\" + key;\n      return path;\n    }\n  }, {\n    key: \"processColor\",\n    value: function processColor(key, value, options) {\n      if (isEqual_1.default(key, 'color') || endsWith_1.default(key, 'Color')) {\n        options[key] = value === null ? 'NoColor' : this.colorService.toNativeColor(value);\n      }\n    }\n  }, {\n    key: \"processWithRegisteredProcessor\",\n    value: function processWithRegisteredProcessor(key, value, options, path, commandName, passProps) {\n      var registeredProcessors = this.optionProcessorsRegistry.getProcessors(path);\n\n      if (registeredProcessors) {\n        registeredProcessors.forEach(function (processor) {\n          options[key] = processor(value, commandName, passProps);\n        });\n      }\n    }\n  }, {\n    key: \"processImage\",\n    value: function processImage(key, value, options) {\n      if (isEqual_1.default(key, 'icon') || isEqual_1.default(key, 'image') || endsWith_1.default(key, 'Icon') || endsWith_1.default(key, 'Image')) {\n        options[key] = isString_1.default(value) ? value : this.assetService.resolveFromRequire(value);\n      }\n    }\n  }, {\n    key: \"processButtonsPassProps\",\n    value: function processButtonsPassProps(key, value) {\n      var _this4 = this;\n\n      if (endsWith_1.default(key, 'Buttons')) {\n        forEach_1.default(value, function (button) {\n          if (button.passProps && button.id) {\n            _this4.store.updateProps(button.id, button.passProps);\n\n            button.passProps = undefined;\n          }\n        });\n      }\n    }\n  }, {\n    key: \"processComponent\",\n    value: function processComponent(key, value, options) {\n      if (isEqual_1.default(key, 'component')) {\n        value.componentId = value.id ? value.id : this.uniqueIdProvider.generate('CustomComponent');\n        this.store.ensureClassForName(value.name);\n\n        if (value.passProps) {\n          this.store.updateProps(value.componentId, value.passProps);\n        }\n\n        options[key].passProps = undefined;\n      }\n    }\n  }, {\n    key: \"processSearchBar\",\n    value: function processSearchBar(key, value, options) {\n      var _options$searchBarHid, _options$hideNavBarOn, _options$searchBarPla;\n\n      if (key !== 'searchBar') {\n        return;\n      }\n\n      var deprecatedSearchBarOptions = {\n        visible: false,\n        hideOnScroll: (_options$searchBarHid = options.searchBarHiddenWhenScrolling) != null ? _options$searchBarHid : false,\n        hideTopBarOnFocus: (_options$hideNavBarOn = options.hideNavBarOnFocusSearchBar) != null ? _options$hideNavBarOn : false,\n        obscuresBackgroundDuringPresentation: false,\n        backgroundColor: options.searchBarBackgroundColor,\n        tintColor: options.searchBarTintColor,\n        placeholder: (_options$searchBarPla = options.searchBarPlaceholder) != null ? _options$searchBarPla : ''\n      };\n\n      if (typeof value === 'boolean') {\n        this.deprecations.onProcessOptions(key, options, '');\n        options[key] = _objectSpread(_objectSpread({}, deprecatedSearchBarOptions), {}, {\n          visible: value\n        });\n      } else {\n        options[key] = _objectSpread(_objectSpread({}, deprecatedSearchBarOptions), value);\n      }\n    }\n  }, {\n    key: \"processInterpolation\",\n    value: function processInterpolation(key, value, options) {\n      if (isEqual_1.default(key, 'interpolation')) {\n        if (typeof value === 'string') {\n          this.deprecations.onProcessOptions(key, options, '');\n          options[key] = {\n            type: options[key]\n          };\n        }\n      }\n    }\n  }, {\n    key: \"processAnimation\",\n    value: function processAnimation(key, value, options) {\n      this.processPush(key, value, options);\n      this.processPop(key, value, options);\n      this.processSetStackRoot(key, value, options);\n      this.processShowModal(key, value, options);\n      this.processDismissModal(key, value, options);\n    }\n  }, {\n    key: \"processSetStackRoot\",\n    value: function processSetStackRoot(key, animation, parentOptions) {\n      if (key !== 'setStackRoot') return;\n      if (this.isNewStackAnimationApi(animation)) return;\n      this.convertDeprecatedViewAnimationApiToNewStackAnimationApi(animation, parentOptions);\n    }\n  }, {\n    key: \"isNewStackAnimationApi\",\n    value: function isNewStackAnimationApi(animation) {\n      return has_1.default(animation, 'content') || has_1.default(animation, 'topBar') || has_1.default(animation, 'bottomTabs');\n    }\n  }, {\n    key: \"convertDeprecatedViewAnimationApiToNewStackAnimationApi\",\n    value: function convertDeprecatedViewAnimationApiToNewStackAnimationApi(animation, parentOptions) {\n      if (!has_1.default(animation, 'content.enter') && !has_1.default(animation, 'content.exit')) {\n        parentOptions.setStackRoot = {\n          content: {\n            enter: animation\n          }\n        };\n\n        if (has_1.default(animation, 'enabled')) {\n          parentOptions.setStackRoot.enabled = animation.enabled;\n        }\n\n        if (has_1.default(animation, 'waitForRender')) {\n          parentOptions.setStackRoot.waitForRender = animation.waitForRender;\n        }\n      }\n    }\n  }, {\n    key: \"processPop\",\n    value: function processPop(key, animation, parentOptions) {\n      if (key !== 'pop') return;\n\n      if (animation.content && !has_1.default(animation, 'content.enter') && !has_1.default(animation, 'content.exit')) {\n        parentOptions.pop.content = {\n          exit: animation.content\n        };\n      }\n\n      if (animation.topBar && !has_1.default(animation, 'topBar.enter') && !has_1.default(animation, 'topBar.exit')) {\n        parentOptions.pop.topBar = {\n          exit: animation.topBar\n        };\n      }\n\n      if (animation.bottomTabs && !has_1.default(animation, 'bottomTabs.enter') && !has_1.default(animation, 'bottomTabs.exit')) {\n        parentOptions.pop.bottomTabs = {\n          exit: animation.bottomTabs\n        };\n      }\n    }\n  }, {\n    key: \"processShowModal\",\n    value: function processShowModal(key, animation, parentOptions) {\n      if (key !== 'showModal') return;\n\n      if (!('enter' in animation)) {\n        var elementTransitions = animation.elementTransitions;\n        var sharedElementTransitions = animation.sharedElementTransitions;\n\n        var enter = _objectSpread({}, animation);\n\n        delete enter.sharedElementTransitions;\n        delete enter.elementTransitions;\n        parentOptions.showModal = {\n          enter: enter,\n          sharedElementTransitions: sharedElementTransitions,\n          elementTransitions: elementTransitions\n        };\n      }\n    }\n  }, {\n    key: \"processDismissModal\",\n    value: function processDismissModal(key, animation, parentOptions) {\n      if (key !== 'dismissModal') return;\n\n      if (!('exit' in animation)) {\n        var elementTransitions = animation.elementTransitions;\n        var sharedElementTransitions = animation.sharedElementTransitions;\n\n        var exit = _objectSpread({}, animation);\n\n        delete exit.sharedElementTransitions;\n        delete exit.elementTransitions;\n        parentOptions.dismissModal = {\n          exit: exit,\n          sharedElementTransitions: sharedElementTransitions,\n          elementTransitions: elementTransitions\n        };\n      }\n    }\n  }, {\n    key: \"processPush\",\n    value: function processPush(key, animation, parentOptions) {\n      if (key !== 'push') return;\n\n      if (animation.content && !has_1.default(animation, 'content.enter') && !has_1.default(animation, 'content.exit')) {\n        parentOptions.push.content = {\n          enter: animation.content\n        };\n      }\n\n      if (animation.topBar && !has_1.default(animation, 'topBar.enter') && !has_1.default(animation, 'topBar.exit')) {\n        parentOptions.push.topBar = {\n          enter: animation.topBar\n        };\n      }\n\n      if (animation.bottomTabs && !has_1.default(animation, 'bottomTabs.enter') && !has_1.default(animation, 'bottomTabs.exit')) {\n        parentOptions.push.bottomTabs = {\n          enter: animation.bottomTabs\n        };\n      }\n    }\n  }]);\n\n  return OptionsProcessor;\n}();\n\nexports.OptionsProcessor = OptionsProcessor;","map":{"version":3,"sources":["/Users/lunli/Thesis_LL&TJ/Thesis/ThesisDemo/Client/node_modules/react-native-navigation/lib/dist/commands/OptionsProcessor.js"],"names":["Object","defineProperty","exports","value","OptionsProcessor","tslib_1","require","clone_1","__importDefault","isEqual_1","isObject_1","isArray_1","isString_1","endsWith_1","forEach_1","has_1","store","uniqueIdProvider","optionProcessorsRegistry","colorService","assetService","deprecations","options","commandName","props","processObject","default","key","parentOptions","onProcessOptions","checkForDeprecatedOptions","onProcessDefaultOptions","objectToProcess","onProcess","parentPath","objectPath","resolveObjectPath","processWithRegisteredProcessor","processColor","processComponent","processImage","processButtonsPassProps","processSearchBar","processInterpolation","processAnimation","processedValue","path","toNativeColor","passProps","registeredProcessors","getProcessors","forEach","processor","resolveFromRequire","button","id","updateProps","undefined","componentId","generate","ensureClassForName","name","deprecatedSearchBarOptions","visible","hideOnScroll","searchBarHiddenWhenScrolling","hideTopBarOnFocus","hideNavBarOnFocusSearchBar","obscuresBackgroundDuringPresentation","backgroundColor","searchBarBackgroundColor","tintColor","searchBarTintColor","placeholder","searchBarPlaceholder","type","processPush","processPop","processSetStackRoot","processShowModal","processDismissModal","animation","isNewStackAnimationApi","convertDeprecatedViewAnimationApiToNewStackAnimationApi","setStackRoot","content","enter","enabled","waitForRender","pop","exit","topBar","bottomTabs","elementTransitions","sharedElementTransitions","showModal","dismissModal","push"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OptionsProcessor = void 0;\nconst tslib_1 = require(\"tslib\");\nconst clone_1 = tslib_1.__importDefault(require(\"lodash/clone\"));\nconst isEqual_1 = tslib_1.__importDefault(require(\"lodash/isEqual\"));\nconst isObject_1 = tslib_1.__importDefault(require(\"lodash/isObject\"));\nconst isArray_1 = tslib_1.__importDefault(require(\"lodash/isArray\"));\nconst isString_1 = tslib_1.__importDefault(require(\"lodash/isString\"));\nconst endsWith_1 = tslib_1.__importDefault(require(\"lodash/endsWith\"));\nconst forEach_1 = tslib_1.__importDefault(require(\"lodash/forEach\"));\nconst has_1 = tslib_1.__importDefault(require(\"lodash/has\"));\nclass OptionsProcessor {\n    constructor(store, uniqueIdProvider, optionProcessorsRegistry, colorService, assetService, deprecations) {\n        this.store = store;\n        this.uniqueIdProvider = uniqueIdProvider;\n        this.optionProcessorsRegistry = optionProcessorsRegistry;\n        this.colorService = colorService;\n        this.assetService = assetService;\n        this.deprecations = deprecations;\n    }\n    processOptions(options, commandName, props) {\n        this.processObject(options, clone_1.default(options), (key, parentOptions) => {\n            this.deprecations.onProcessOptions(key, parentOptions, commandName);\n            this.deprecations.checkForDeprecatedOptions(parentOptions);\n        }, commandName, props);\n    }\n    processDefaultOptions(options, commandName) {\n        this.processObject(options, clone_1.default(options), (key, parentOptions) => {\n            this.deprecations.onProcessDefaultOptions(key, parentOptions);\n        }, commandName);\n    }\n    processObject(objectToProcess, parentOptions, onProcess, commandName, props, parentPath) {\n        forEach_1.default(objectToProcess, (value, key) => {\n            const objectPath = this.resolveObjectPath(key, parentPath);\n            this.processWithRegisteredProcessor(key, value, objectToProcess, objectPath, commandName, props);\n            this.processColor(key, value, objectToProcess);\n            if (!value) {\n                return;\n            }\n            this.processComponent(key, value, objectToProcess);\n            this.processImage(key, value, objectToProcess);\n            this.processButtonsPassProps(key, value);\n            this.processSearchBar(key, value, objectToProcess);\n            this.processInterpolation(key, value, objectToProcess);\n            this.processAnimation(key, value, objectToProcess);\n            onProcess(key, parentOptions);\n            const processedValue = objectToProcess[key];\n            if (!isEqual_1.default(key, 'passProps') && (isObject_1.default(processedValue) || isArray_1.default(processedValue))) {\n                this.processObject(processedValue, parentOptions, onProcess, commandName, props, objectPath);\n            }\n        });\n    }\n    resolveObjectPath(key, path) {\n        if (!path)\n            path = key;\n        else\n            path += `.${key}`;\n        return path;\n    }\n    processColor(key, value, options) {\n        if (isEqual_1.default(key, 'color') || endsWith_1.default(key, 'Color')) {\n            options[key] = value === null ? 'NoColor' : this.colorService.toNativeColor(value);\n        }\n    }\n    processWithRegisteredProcessor(key, value, options, path, commandName, passProps) {\n        const registeredProcessors = this.optionProcessorsRegistry.getProcessors(path);\n        if (registeredProcessors) {\n            registeredProcessors.forEach((processor) => {\n                options[key] = processor(value, commandName, passProps);\n            });\n        }\n    }\n    processImage(key, value, options) {\n        if (isEqual_1.default(key, 'icon') ||\n            isEqual_1.default(key, 'image') ||\n            endsWith_1.default(key, 'Icon') ||\n            endsWith_1.default(key, 'Image')) {\n            options[key] = isString_1.default(value) ? value : this.assetService.resolveFromRequire(value);\n        }\n    }\n    processButtonsPassProps(key, value) {\n        if (endsWith_1.default(key, 'Buttons')) {\n            forEach_1.default(value, (button) => {\n                if (button.passProps && button.id) {\n                    this.store.updateProps(button.id, button.passProps);\n                    button.passProps = undefined;\n                }\n            });\n        }\n    }\n    processComponent(key, value, options) {\n        if (isEqual_1.default(key, 'component')) {\n            value.componentId = value.id ? value.id : this.uniqueIdProvider.generate('CustomComponent');\n            this.store.ensureClassForName(value.name);\n            if (value.passProps) {\n                this.store.updateProps(value.componentId, value.passProps);\n            }\n            options[key].passProps = undefined;\n        }\n    }\n    processSearchBar(key, value, options) {\n        if (key !== 'searchBar') {\n            return;\n        }\n        const deprecatedSearchBarOptions = {\n            visible: false,\n            hideOnScroll: options.searchBarHiddenWhenScrolling ?? false,\n            hideTopBarOnFocus: options.hideNavBarOnFocusSearchBar ?? false,\n            obscuresBackgroundDuringPresentation: false,\n            backgroundColor: options.searchBarBackgroundColor,\n            tintColor: options.searchBarTintColor,\n            placeholder: options.searchBarPlaceholder ?? '',\n        };\n        if (typeof value === 'boolean') {\n            // Deprecated\n            this.deprecations.onProcessOptions(key, options, '');\n            options[key] = {\n                ...deprecatedSearchBarOptions,\n                visible: value,\n            };\n        }\n        else {\n            options[key] = {\n                ...deprecatedSearchBarOptions,\n                ...value,\n            };\n        }\n    }\n    processInterpolation(key, value, options) {\n        if (isEqual_1.default(key, 'interpolation')) {\n            if (typeof value === 'string') {\n                this.deprecations.onProcessOptions(key, options, '');\n                options[key] = {\n                    type: options[key],\n                };\n            }\n        }\n    }\n    processAnimation(key, value, options) {\n        this.processPush(key, value, options);\n        this.processPop(key, value, options);\n        this.processSetStackRoot(key, value, options);\n        this.processShowModal(key, value, options);\n        this.processDismissModal(key, value, options);\n    }\n    processSetStackRoot(key, animation, parentOptions) {\n        if (key !== 'setStackRoot')\n            return;\n        if (this.isNewStackAnimationApi(animation))\n            return;\n        this.convertDeprecatedViewAnimationApiToNewStackAnimationApi(animation, parentOptions);\n    }\n    isNewStackAnimationApi(animation) {\n        return has_1.default(animation, 'content') || has_1.default(animation, 'topBar') || has_1.default(animation, 'bottomTabs');\n    }\n    convertDeprecatedViewAnimationApiToNewStackAnimationApi(animation, parentOptions) {\n        if (!has_1.default(animation, 'content.enter') && !has_1.default(animation, 'content.exit')) {\n            parentOptions.setStackRoot = {\n                content: {\n                    enter: animation,\n                },\n            };\n            if (has_1.default(animation, 'enabled')) {\n                parentOptions.setStackRoot.enabled = animation.enabled;\n            }\n            if (has_1.default(animation, 'waitForRender')) {\n                parentOptions.setStackRoot.waitForRender = animation.waitForRender;\n            }\n        }\n    }\n    processPop(key, animation, parentOptions) {\n        if (key !== 'pop')\n            return;\n        if (animation.content && !has_1.default(animation, 'content.enter') && !has_1.default(animation, 'content.exit')) {\n            parentOptions.pop.content = {\n                exit: animation.content,\n            };\n        }\n        if (animation.topBar && !has_1.default(animation, 'topBar.enter') && !has_1.default(animation, 'topBar.exit')) {\n            parentOptions.pop.topBar = {\n                exit: animation.topBar,\n            };\n        }\n        if (animation.bottomTabs &&\n            !has_1.default(animation, 'bottomTabs.enter') &&\n            !has_1.default(animation, 'bottomTabs.exit')) {\n            parentOptions.pop.bottomTabs = {\n                exit: animation.bottomTabs,\n            };\n        }\n    }\n    processShowModal(key, animation, parentOptions) {\n        if (key !== 'showModal')\n            return;\n        if (!('enter' in animation)) {\n            const elementTransitions = animation.elementTransitions;\n            const sharedElementTransitions = animation.sharedElementTransitions;\n            const enter = { ...animation };\n            delete enter.sharedElementTransitions;\n            delete enter.elementTransitions;\n            parentOptions.showModal = {\n                enter,\n                sharedElementTransitions,\n                elementTransitions,\n            };\n        }\n    }\n    processDismissModal(key, animation, parentOptions) {\n        if (key !== 'dismissModal')\n            return;\n        if (!('exit' in animation)) {\n            const elementTransitions = animation.elementTransitions;\n            const sharedElementTransitions = animation.sharedElementTransitions;\n            const exit = { ...animation };\n            delete exit.sharedElementTransitions;\n            delete exit.elementTransitions;\n            parentOptions.dismissModal = {\n                exit,\n                sharedElementTransitions,\n                elementTransitions,\n            };\n        }\n    }\n    processPush(key, animation, parentOptions) {\n        if (key !== 'push')\n            return;\n        if (animation.content && !has_1.default(animation, 'content.enter') && !has_1.default(animation, 'content.exit')) {\n            parentOptions.push.content = {\n                enter: animation.content,\n            };\n        }\n        if (animation.topBar && !has_1.default(animation, 'topBar.enter') && !has_1.default(animation, 'topBar.exit')) {\n            parentOptions.push.topBar = {\n                enter: animation.topBar,\n            };\n        }\n        if (animation.bottomTabs &&\n            !has_1.default(animation, 'bottomTabs.enter') &&\n            !has_1.default(animation, 'bottomTabs.exit')) {\n            parentOptions.push.bottomTabs = {\n                enter: animation.bottomTabs,\n            };\n        }\n    }\n}\nexports.OptionsProcessor = OptionsProcessor;\n"]},"metadata":{},"sourceType":"script"}